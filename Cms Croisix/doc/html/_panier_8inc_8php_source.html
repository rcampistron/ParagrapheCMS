<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CMSCroisix:  Fichier source de class/Panier.inc.php</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Généré par Doxygen 1.6.2 -->
  <div class="navpath"><a class="el" href="dir_a0b1ff84f080d2ce1409d6712f25da0e.html">class</a>
  </div>
<div class="contents">
<h1>Panier.inc.php</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php <span class="comment">/* Date de cration: 22/01/2009 */</span> 
<a name="l00008"></a><a class="code" href="class_panier.html">00008</a> <span class="keyword">class </span><a class="code" href="class_panier.html">Panier</a> {
<a name="l00013"></a><a class="code" href="class_panier.html#aa9ca119feff5a863662358c0c33dd389">00013</a>         <span class="keyword">public</span> <a class="code" href="class_panier.html#aa9ca119feff5a863662358c0c33dd389">$numcom</a>;
<a name="l00018"></a><a class="code" href="class_panier.html#af775a131e63598004c0583b0d14e2613">00018</a>         <span class="keyword">public</span> <a class="code" href="class_panier.html#af775a131e63598004c0583b0d14e2613">$numdetail</a>;
<a name="l00023"></a><a class="code" href="class_panier.html#a6736ef1b2b71aedfdf96dd405024a92a">00023</a>         <span class="keyword">public</span> <a class="code" href="class_panier.html#a6736ef1b2b71aedfdf96dd405024a92a">$nbarticle</a>; <span class="comment">// </span>
<a name="l00028"></a><a class="code" href="class_panier.html#a21010f980d6d093f566fdef94969e944">00028</a> <span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="class_panier.html#a21010f980d6d093f566fdef94969e944">$totalHTsansPort</a>;
<a name="l00033"></a><a class="code" href="class_panier.html#ad5baf85bcd15680b46aca7f9487a6b2f">00033</a>         <span class="keyword">public</span> <a class="code" href="class_panier.html#ad5baf85bcd15680b46aca7f9487a6b2f">$totalHT</a>;
<a name="l00038"></a><a class="code" href="class_panier.html#aad3d8b2d22efe62dfd4c2de337eebe55">00038</a>         <span class="keyword">public</span> <a class="code" href="class_panier.html#aad3d8b2d22efe62dfd4c2de337eebe55">$totalTTC</a>;
<a name="l00043"></a><a class="code" href="class_panier.html#a706efbf0a65def7c3d052a42002317b4">00043</a>         <span class="keyword">public</span> <a class="code" href="class_panier.html#a706efbf0a65def7c3d052a42002317b4">$totalTva</a>;<span class="comment">//</span>
<a name="l00048"></a><a class="code" href="class_panier.html#af18a6a1a5ba5550b49593c0ac768fdad">00048</a> <span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="class_panier.html#af18a6a1a5ba5550b49593c0ac768fdad">$totalPoids</a>;<span class="comment">//</span>
<a name="l00053"></a><a class="code" href="class_panier.html#aacb8537f5777c3eadf736d59dc391c16">00053</a> <span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="class_panier.html#aacb8537f5777c3eadf736d59dc391c16">$totalPoidsbrut</a>;<span class="comment">//</span>
<a name="l00058"></a><a class="code" href="class_panier.html#a9be6e59f17645249b4a886d96e6e22ba">00058</a> <span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="class_panier.html#a9be6e59f17645249b4a886d96e6e22ba">$fraisPort</a>;
<a name="l00063"></a><a class="code" href="class_panier.html#a7182b4cd84be8d619e3f8564a0943ce0">00063</a>         <span class="keyword">public</span> <a class="code" href="class_panier.html#a7182b4cd84be8d619e3f8564a0943ce0">$numclient</a>;      
<a name="l00068"></a><a class="code" href="class_panier.html#a35e0c90f6a00a041dd307a2e54314842">00068</a>         <span class="keyword">public</span> <a class="code" href="class_panier.html#a35e0c90f6a00a041dd307a2e54314842">$pays</a>;
<a name="l00073"></a><a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">00073</a>         <span class="keyword">public</span> <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>;
<a name="l00077"></a><a class="code" href="class_panier.html#a74150c1058bd9811daed41d8719d568e">00077</a>         function <a class="code" href="class_panier.html#a74150c1058bd9811daed41d8719d568e">expressContenu</a>() {
<a name="l00078"></a>00078                 $contenu=array();
<a name="l00079"></a>00079                 $contenu=array(<span class="stringliteral">&quot;numcom&quot;</span>=&gt;$this-&gt;numcom);
<a name="l00080"></a>00080         }
<a name="l00085"></a><a class="code" href="class_panier.html#a487cf12039c33923b27de9c52e2df1ff">00085</a>         function <a class="code" href="class_panier.html#a487cf12039c33923b27de9c52e2df1ff">ajouterArticle</a>($numarticle,$designation,$quantite,$reference,$prix_vente,<a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>=<span class="stringliteral">&quot;&quot;</span>) {
<a name="l00086"></a>00086                 $laCom = <span class="keyword">new</span> <a class="code" href="class_commande.html" title="G&amp;egrave;re les commandes faites sur la boutique.">Commande</a>();
<a name="l00087"></a>00087                 <span class="keywordflow">if</span> (!$this-&gt;numcom) {
<a name="l00088"></a>00088                         <span class="keywordflow">if</span> ($this-&gt;numclient) $laCom-&gt;numclient=$this-&gt;numclient;<span class="comment">// inscription &amp;agrave; une formation</span>
<a name="l00089"></a>00089                         $this-&gt;numcom=$laCom-&gt;creerCommande();<span class="comment">// Si la commande n&#39;est pas créée, on la créée</span>
<a name="l00090"></a>00090                 } 
<a name="l00091"></a>00091                 <span class="keywordflow">if</span> (!$this-&gt;numclient) $_SESSION[<span class="stringliteral">&#39;numcom&#39;</span>]=$this-&gt;numcom;<span class="comment">//on n&#39;est pas dans l&#39;inscription &amp;agrave; une formation </span>
<a name="l00092"></a>00092                 
<a name="l00093"></a>00093                 $designation=str_replace(<span class="stringliteral">&quot;\&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,str_replace(<span class="stringliteral">&quot;&#39;&quot;</span>,<span class="stringliteral">&quot;&#39;&#39;&quot;</span>,stripslashes($designation)));
<a name="l00094"></a>00094                 $reference=str_replace(<span class="stringliteral">&quot;\&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,str_replace(<span class="stringliteral">&quot;&#39;&quot;</span>,<span class="stringliteral">&quot;&#39;&#39;&quot;</span>,stripslashes($reference)));
<a name="l00095"></a>00095                 
<a name="l00096"></a>00096                 
<a name="l00097"></a>00097                 <span class="keywordflow">if</span> (<a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>) mysql_query(<span class="stringliteral">&quot;INSERT INTO if_bo_detail (numcom,numarticle,designation,qte,prix_vente) </span>
<a name="l00098"></a>00098 <span class="stringliteral">                VALUES (&#39;$this-&gt;numcom&#39;,&#39;$numarticle&#39;,&#39;$designation&#39;,&#39;$quantite&#39;,&#39;$prix_vente&#39;)&quot;</span>);
<a name="l00099"></a>00099                 <span class="comment">// C&#39;est l&#39;ajout d&#39;un article autre que 1 doc ou 1 formation</span>
<a name="l00100"></a>00100                 
<a name="l00101"></a>00101                 <span class="keywordflow">else</span> {
<a name="l00102"></a>00102                         mysql_query(<span class="stringliteral">&quot;INSERT INTO if_bo_detail (numcom,numpara,designation,reference,qte,prix_vente) </span>
<a name="l00103"></a>00103 <span class="stringliteral">                        VALUES (&#39;$this-&gt;numcom&#39;,&#39;$numarticle&#39;,&#39;$designation&#39;,&#39;$reference&#39;,&#39;$quantite&#39;,&#39;$prix_vente&#39;) &quot;</span>);
<a name="l00104"></a>00104                 
<a name="l00105"></a>00105                         <span class="comment">//Resolution bug Firefox qui execute plusieurs fois la requete !!!</span>
<a name="l00106"></a>00106                         $result=mysql_query(<span class="stringliteral">&quot;SELECT numdetail FROM if_bo_detail WHERE numpara=&#39;&quot;</span>.$numarticle.<span class="stringliteral">&quot;&#39; AND numcom=&#39;&quot;</span>.$this-&gt;numcom.<span class="stringliteral">&quot;&#39; ORDER BY numdetail&quot;</span>);
<a name="l00107"></a>00107                         <span class="keywordflow">if</span> (mysql_num_rows($result)&gt;1) {
<a name="l00108"></a>00108                                 <span class="keywordflow">while</span>($row=mysql_fetch_row($result)) {
<a name="l00109"></a>00109                                         $tab_numdetail[]=$row[0];
<a name="l00110"></a>00110                                 }
<a name="l00111"></a>00111                                 reset ($tab_numdetail);
<a name="l00112"></a>00112                                 <span class="keywordflow">if</span>(count($tab_numdetail)&gt;1) {
<a name="l00113"></a>00113                                         <span class="keywordflow">for</span> ($i=0;$i&lt;(count($tab_numdetail)-1);$i++) {
<a name="l00114"></a>00114                                                 mysql_query(<span class="stringliteral">&quot;DELETE FROM if_bo_detail WHERE numdetail=&#39;&quot;</span>.$tab_numdetail[$i].<span class="stringliteral">&quot;&#39;&quot;</span>);
<a name="l00115"></a>00115                                         }
<a name="l00116"></a>00116                                 }
<a name="l00117"></a>00117                         }
<a name="l00118"></a>00118                 }
<a name="l00119"></a>00119                         
<a name="l00120"></a>00120                 
<a name="l00121"></a>00121         }
<a name="l00125"></a><a class="code" href="class_panier.html#a609cfea2432dce483e3016bf0ff6ef26">00125</a>         function <a class="code" href="class_panier.html#a609cfea2432dce483e3016bf0ff6ef26">supprimerArticle</a>() {
<a name="l00126"></a>00126                 mysql_query(<span class="stringliteral">&quot;DELETE FROM if_bo_detail WHERE numdetail=&#39;$this-&gt;numdetail&#39;&quot;</span>);
<a name="l00127"></a>00127         }
<a name="l00128"></a>00128         
<a name="l00133"></a><a class="code" href="class_panier.html#aefbeef00d36cf3de83bb42e21fb86e9b">00133</a>         function <a class="code" href="class_panier.html#aefbeef00d36cf3de83bb42e21fb86e9b">miseAJourQteArticle</a>($quantite) {
<a name="l00134"></a>00134                 mysql_query(<span class="stringliteral">&quot;UPDATE if_bo_detail SET qte=&#39;&quot;</span>.$quantite.<span class="stringliteral">&quot;&#39; WHERE numdetail=&#39;&quot;</span>.$this-&gt;numdetail.<span class="stringliteral">&quot;&#39;&quot;</span>);
<a name="l00135"></a>00135         }
<a name="l00139"></a><a class="code" href="class_panier.html#adbcbf392b09f3c6c1e80646d53e5ac44">00139</a>         function <a class="code" href="class_panier.html#adbcbf392b09f3c6c1e80646d53e5ac44">infosPanier</a>() {
<a name="l00140"></a>00140                 <a class="code" href="class_panier.html#ad5baf85bcd15680b46aca7f9487a6b2f">$totalHT</a>=0;
<a name="l00141"></a>00141                 <a class="code" href="class_panier.html#af18a6a1a5ba5550b49593c0ac768fdad">$totalPoids</a>=0; 
<a name="l00142"></a>00142                 $tva=str_replace(<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot;.&quot;</span>,SelectSimple(<span class="stringliteral">&quot;ttva&quot;</span>,<span class="stringliteral">&quot;if_bo_com&quot;</span>,<span class="stringliteral">&quot;numcom&quot;</span>,$this-&gt;numcom));
<a name="l00143"></a>00143                 $result=mysql_query(<span class="stringliteral">&quot;SELECT * FROM if_bo_detail WHERE numcom=&#39;$this-&gt;numcom&#39; AND designation!=&#39;Inscription formation&#39;&quot;</span>);
<a name="l00144"></a>00144                 <span class="keywordflow">while</span> ($row=mysql_fetch_array($result)) {
<a name="l00145"></a>00145                         <a class="code" href="class_panier.html#ad5baf85bcd15680b46aca7f9487a6b2f">$totalHT</a>+=str_replace(<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot;.&quot;</span>,$row[<span class="stringliteral">&quot;qte&quot;</span>])*str_replace(<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot;.&quot;</span>,$row[<span class="stringliteral">&quot;prix_vente&quot;</span>]);
<a name="l00146"></a>00146                         $this-&gt;nbarticle++;
<a name="l00147"></a>00147                         $poids=SelectSimple(<span class="stringliteral">&quot;poids&quot;</span>,<span class="stringliteral">&quot;if_docs&quot;</span>,<span class="stringliteral">&quot;numpara&quot;</span>,$row[<span class="stringliteral">&quot;numpara&quot;</span>]); 
<a name="l00148"></a>00148                         <a class="code" href="class_panier.html#af18a6a1a5ba5550b49593c0ac768fdad">$totalPoids</a>+=$poids;
<a name="l00149"></a>00149                         <span class="keywordflow">if</span> ($row[<span class="stringliteral">&quot;numarticle&quot;</span>]) $this-&gt;article=<span class="stringliteral">&quot;o&quot;</span>;
<a name="l00150"></a>00150                         
<a name="l00151"></a>00151                 }
<a name="l00152"></a>00152                 
<a name="l00153"></a>00153                 <span class="comment">/* HC 28 mai 2009 - frais de ports gérés maintenant pour France uniquement et selon total commande - voir ci-dessous</span>
<a name="l00154"></a>00154 <span class="comment">                if ($totalPoids) {</span>
<a name="l00155"></a>00155 <span class="comment">                        //Calcul des frais de port</span>
<a name="l00156"></a>00156 <span class="comment">                        if ($this-&gt;pays) {</span>
<a name="l00157"></a>00157 <span class="comment">                                $zone=SelectSimple(&quot;zone&quot;,&quot;if_pays&quot;,&quot;numpays&quot;,$this-&gt;pays); </span>
<a name="l00158"></a>00158 <span class="comment">                        } else {</span>
<a name="l00159"></a>00159 <span class="comment">                                $zone=1;</span>
<a name="l00160"></a>00160 <span class="comment">                        }</span>
<a name="l00161"></a>00161 <span class="comment">                        $tarif=SelectSimple(&quot;tarif&quot;,&quot;if_tarifs_ports&quot;,&quot;zone&quot;,$zone,&quot; AND $totalPoids BETWEEN poids_min AND poids_max&quot;);</span>
<a name="l00162"></a>00162 <span class="comment">                        if ($tarif) $this-&gt;fraisPort=str_replace(&quot;.&quot;,&quot;,&quot;,$tarif); </span>
<a name="l00163"></a>00163 <span class="comment">                }</span>
<a name="l00164"></a>00164 <span class="comment">                */</span>
<a name="l00165"></a>00165                 
<a name="l00166"></a>00166                 $this-&gt;totalPoidsbrut=<a class="code" href="class_panier.html#af18a6a1a5ba5550b49593c0ac768fdad">$totalPoids</a>;
<a name="l00167"></a>00167                 $this-&gt;totalHTsansPort=number_format(<a class="code" href="class_panier.html#ad5baf85bcd15680b46aca7f9487a6b2f">$totalHT</a>,2,<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00168"></a>00168                 <span class="comment">//$this-&gt;totalHT=number_format($totalHT,2,&quot;,&quot;,&quot; &quot;); //important de faire ce number_format ici</span>
<a name="l00169"></a>00169                 
<a name="l00170"></a>00170                 <span class="comment">//$this-&gt;totalHT=number_format($totalHT,2,&quot;,&quot;,&quot;&quot;); //important de faire ce number_format ici MODIF JULIEN DECEMBRE 2009 POUR LE CALCUL DU PRIX TOTAL</span>
<a name="l00171"></a>00171                 <span class="comment">// ON NE PEUT PAS FAIRE DE CALCUL AVEC PAR EX 1 850 EUROS MAIS 1850 EUROS</span>
<a name="l00172"></a>00172                 
<a name="l00173"></a>00173                 $this-&gt;totalHT=<a class="code" href="class_panier.html#ad5baf85bcd15680b46aca7f9487a6b2f">$totalHT</a>; <span class="comment">// nouvelle rectification, pas besoin de faire un number format tant que le calcul n&#39;est pas fini.......</span>
<a name="l00174"></a>00174                 
<a name="l00175"></a>00175                 <span class="comment">//Calcul des frais de port - uniquement sur les produits qui ont un poids</span>
<a name="l00176"></a>00176                 <span class="keywordflow">if</span> ($this-&gt;pays==247 &amp;&amp; <a class="code" href="class_panier.html#af18a6a1a5ba5550b49593c0ac768fdad">$totalPoids</a>) {<span class="comment">//France</span>
<a name="l00177"></a>00177                         <span class="keywordflow">if</span> ($this-&gt;totalHT&lt;15) $this-&gt;fraisPort=<span class="stringliteral">&quot;5&quot;</span>;
<a name="l00178"></a>00178                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($this-&gt;totalHT&gt;=15 &amp;&amp; $this-&gt;totalHT&lt;=35) $this-&gt;fraisPort=<span class="stringliteral">&quot;7&quot;</span>;
<a name="l00179"></a>00179                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($this-&gt;totalHT&gt;35) $this-&gt;fraisPort=<span class="stringliteral">&quot;0&quot;</span>;
<a name="l00180"></a>00180                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($this-&gt;pays!=247 &amp;&amp; <a class="code" href="class_panier.html#af18a6a1a5ba5550b49593c0ac768fdad">$totalPoids</a>)  {<span class="comment">//preparation pour le futur</span>
<a name="l00181"></a>00181                         $this-&gt;fraisPort=<span class="stringliteral">&quot;0&quot;</span>;
<a name="l00182"></a>00182                 } <span class="keywordflow">else</span> {
<a name="l00183"></a>00183                         $this-&gt;fraisPort=<span class="stringliteral">&quot;0&quot;</span>;
<a name="l00184"></a>00184                 }
<a name="l00185"></a>00185                 
<a name="l00186"></a>00186                 
<a name="l00187"></a>00187                 $this-&gt;totalHT=$this-&gt;totalHT+$this-&gt;fraisPort;
<a name="l00188"></a>00188                 <span class="comment">//$this-&gt;totalTva=number_format(($totalHT * ($tva / 100)),2,&quot;,&quot;,&quot; &quot;);</span>
<a name="l00189"></a>00189                 $this-&gt;totalTva=0; <span class="comment">// pas de TVA pour IFIP</span>
<a name="l00190"></a>00190                 <span class="comment">//$this-&gt;totalTTC=number_format(($totalHT * (1 + ($tva / 100))+$tarif),2,&quot;,&quot;,&quot; &quot;); // NON pas de TVA pour IFIP</span>
<a name="l00191"></a>00191                 
<a name="l00192"></a>00192                 $this-&gt;totalHT=number_format($this-&gt;totalHT,2,<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00193"></a>00193                 
<a name="l00194"></a>00194                 $this-&gt;totalTTC=$this-&gt;totalHT;
<a name="l00195"></a>00195                 $this-&gt;fraisPort=number_format($this-&gt;fraisPort,2,<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00196"></a>00196                 $this-&gt;totalPoids=number_format((<a class="code" href="class_panier.html#af18a6a1a5ba5550b49593c0ac768fdad">$totalPoids</a>/1000),2,<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00197"></a>00197 
<a name="l00198"></a>00198                 
<a name="l00199"></a>00199                 <span class="comment">//$this-&gt;totalTTC+=$tarif;</span>
<a name="l00200"></a>00200         }
<a name="l00205"></a><a class="code" href="class_panier.html#a3d5981321ab0b506470ee0d82c310e67">00205</a>         function <a class="code" href="class_panier.html#a3d5981321ab0b506470ee0d82c310e67">listerArticles</a>() {
<a name="l00206"></a>00206                 $list_article=array();
<a name="l00207"></a>00207                 $result = mysql_query(<span class="stringliteral">&quot;SELECT * FROM if_bo_detail WHERE numcom=&#39;$this-&gt;numcom&#39; AND designation!=&#39;Inscription formation&#39; AND numpara!=&#39;0&#39;&quot;</span>);
<a name="l00208"></a>00208                 <span class="keywordflow">while</span> ($row=mysql_fetch_array($result)) {
<a name="l00209"></a>00209                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;numdetail&quot;</span>]=$row[<span class="stringliteral">&quot;numdetail&quot;</span>];
<a name="l00210"></a>00210                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;numpara&quot;</span>]=$row[<span class="stringliteral">&quot;numpara&quot;</span>];
<a name="l00211"></a>00211                    $doc = <span class="keyword">new</span> <a class="code" href="class_documentation.html" title="Classe Documentation : sp&amp;eacute;cifique IFIP.">Documentation</a>();
<a name="l00212"></a>00212                    $doc-&gt;numpara=$row[<span class="stringliteral">&quot;numpara&quot;</span>];
<a name="l00213"></a>00213                    $doc-&gt;infosDoc();
<a name="l00214"></a>00214                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;titre&quot;</span>]=$doc-&gt;titrePara;
<a name="l00215"></a>00215                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;reference&quot;</span>]=$row[<span class="stringliteral">&quot;reference&quot;</span>];
<a name="l00216"></a>00216                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;qte&quot;</span>]=$row[<span class="stringliteral">&quot;qte&quot;</span>];  
<a name="l00217"></a>00217                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;prix_vente&quot;</span>]=number_format(str_replace(<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot;.&quot;</span>,$row[<span class="stringliteral">&quot;prix_vente&quot;</span>]),2,<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00218"></a>00218                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;prix_total&quot;</span>]=number_format((str_replace(<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot;.&quot;</span>,$row[<span class="stringliteral">&quot;prix_vente&quot;</span>])*$row[<span class="stringliteral">&quot;qte&quot;</span>]),2,<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot; &quot;</span>); 
<a name="l00219"></a>00219                    
<a name="l00220"></a>00220                    $list_article[]=<a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>;
<a name="l00221"></a>00221                 }
<a name="l00222"></a>00222                 
<a name="l00223"></a>00223                 <span class="keywordflow">return</span> $list_article;
<a name="l00224"></a>00224          }
<a name="l00230"></a><a class="code" href="class_panier.html#ae373a1a41cbb1b0f5459e16bb0079da8">00230</a>          function <a class="code" href="class_panier.html#ae373a1a41cbb1b0f5459e16bb0079da8">listerArticlesForm</a>() {
<a name="l00231"></a>00231                 $list_article=array();
<a name="l00232"></a>00232                 $result = mysql_query(<span class="stringliteral">&quot;SELECT * FROM if_bo_detail WHERE numcom=&#39;$this-&gt;numcom&#39;&quot;</span>);
<a name="l00233"></a>00233                 <span class="keywordflow">while</span> ($row=mysql_fetch_array($result)) {
<a name="l00234"></a>00234                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;numdetail&quot;</span>]=$row[<span class="stringliteral">&quot;numdetail&quot;</span>];
<a name="l00235"></a>00235                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;numcom&quot;</span>]=$row[<span class="stringliteral">&quot;numcom&quot;</span>];
<a name="l00236"></a>00236                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;numpara&quot;</span>]=$row[<span class="stringliteral">&quot;numpara&quot;</span>];
<a name="l00237"></a>00237                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;designation&quot;</span>]=$row[<span class="stringliteral">&quot;designation&quot;</span>];
<a name="l00238"></a>00238                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;montantTTC&quot;</span>]=SelectSimple(<span class="stringliteral">&quot;montantTTC&quot;</span>,<span class="stringliteral">&quot;if_bo_com&quot;</span>,<span class="stringliteral">&quot;numcom&quot;</span>,$this-&gt;numcom);
<a name="l00239"></a>00239                    $list_article[]=<a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>;
<a name="l00240"></a>00240                 }
<a name="l00241"></a>00241                 
<a name="l00242"></a>00242                 <span class="keywordflow">return</span> $list_article;
<a name="l00243"></a>00243          }
<a name="l00248"></a><a class="code" href="class_panier.html#a084017cb4a428511d1f56d9274b35117">00248</a>          function <a class="code" href="class_panier.html#a084017cb4a428511d1f56d9274b35117">listerArticlesCrees</a>() {
<a name="l00249"></a>00249                 $list_article=array();
<a name="l00250"></a>00250                 $result = mysql_query(<span class="stringliteral">&quot;SELECT * FROM if_bo_detail WHERE numcom=&#39;$this-&gt;numcom&#39;&quot;</span>);
<a name="l00251"></a>00251                 <span class="keywordflow">while</span> ($row=mysql_fetch_array($result)) {
<a name="l00252"></a>00252                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;numdetail&quot;</span>]=$row[<span class="stringliteral">&quot;numdetail&quot;</span>];
<a name="l00253"></a>00253                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;numcom&quot;</span>]=$row[<span class="stringliteral">&quot;numcom&quot;</span>];
<a name="l00254"></a>00254                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;numarticle&quot;</span>]=$row[<span class="stringliteral">&quot;numarticle&quot;</span>];
<a name="l00255"></a>00255                    <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;designation&quot;</span>]=$row[<span class="stringliteral">&quot;designation&quot;</span>];
<a name="l00256"></a>00256                     <a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>[<span class="stringliteral">&quot;prix_vente&quot;</span>]=number_format(str_replace(<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot;.&quot;</span>,$row[<span class="stringliteral">&quot;prix_vente&quot;</span>]),2,<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00257"></a>00257                    $list_article[]=<a class="code" href="class_panier.html#a851e7a5c8ea44175df349434c0f2fa7c">$article</a>;
<a name="l00258"></a>00258                 }
<a name="l00259"></a>00259                 
<a name="l00260"></a>00260                 <span class="keywordflow">return</span> $list_article;
<a name="l00261"></a>00261          }
<a name="l00262"></a>00262          
<a name="l00263"></a>00263 }<span class="comment">//fin de classe</span>
<a name="l00264"></a>00264 
<a name="l00265"></a>00265 ?&gt;
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Généré par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>

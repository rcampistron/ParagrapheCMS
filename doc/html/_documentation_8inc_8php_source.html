<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CMSCroisix:  Fichier source de class/Documentation.inc.php</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Généré par Doxygen 1.6.2 -->
  <div class="navpath"><a class="el" href="dir_a0b1ff84f080d2ce1409d6712f25da0e.html">class</a>
  </div>
<div class="contents">
<h1>Documentation.inc.php</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 
<a name="l00011"></a><a class="code" href="class_documentation.html">00011</a> <span class="keyword">class </span><a class="code" href="class_documentation.html" title="Classe Documentation : sp&amp;eacute;cifique IFIP.">Documentation</a> <span class="keyword">extends</span> <a class="code" href="class_paragraphe.html" title="G&amp;egrave;re le traitement des paragraphes.">Paragraphe</a> {
<a name="l00012"></a>00012         
<a name="l00017"></a><a class="code" href="class_documentation.html#a40030d273b7a2e68febbe4b417f5f9b5">00017</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#a40030d273b7a2e68febbe4b417f5f9b5">$type_doc</a>;
<a name="l00022"></a><a class="code" href="class_documentation.html#ac98524058de71a401e413e3a3fecf53a">00022</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#ac98524058de71a401e413e3a3fecf53a">$nom_type_doc</a>;
<a name="l00027"></a><a class="code" href="class_documentation.html#a848256f90a8fc81a317bcc9d11b63cea">00027</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#a848256f90a8fc81a317bcc9d11b63cea">$new_type_doc</a>; 
<a name="l00032"></a><a class="code" href="class_documentation.html#a0780b12fa9021b4a31e506625eb491cb">00032</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#a0780b12fa9021b4a31e506625eb491cb">$titre_en</a>;
<a name="l00037"></a><a class="code" href="class_documentation.html#a31d817d161e910dbc47cda5fd1b819c4">00037</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#a31d817d161e910dbc47cda5fd1b819c4">$contenu_en</a>;
<a name="l00042"></a><a class="code" href="class_documentation.html#ad83e0128c5161a2cf35a9c5a7a1c8f14">00042</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#ad83e0128c5161a2cf35a9c5a7a1c8f14">$keyw</a>; 
<a name="l00047"></a><a class="code" href="class_documentation.html#acd205e93e4fcca4da35a19ee989a93e3">00047</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#acd205e93e4fcca4da35a19ee989a93e3">$auteur</a>; 
<a name="l00052"></a><a class="code" href="class_documentation.html#a47082ce3e04d8f9e5f1c14fa23df199e">00052</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#a47082ce3e04d8f9e5f1c14fa23df199e">$date_brute</a>;
<a name="l00057"></a><a class="code" href="class_documentation.html#a31a6d6b9409a2e11e93fe8211a84cba0">00057</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#a31a6d6b9409a2e11e93fe8211a84cba0">$date</a>;
<a name="l00062"></a><a class="code" href="class_documentation.html#ac581d7e3fc26c07d047fa910e992e653">00062</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#ac581d7e3fc26c07d047fa910e992e653">$date_libre</a>; 
<a name="l00067"></a><a class="code" href="class_documentation.html#af284d6cd5fb529c0d33e79c5caa209b9">00067</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#af284d6cd5fb529c0d33e79c5caa209b9">$anneeDoc</a>; 
<a name="l00072"></a><a class="code" href="class_documentation.html#ae9b9a4df36112dc45709a09cff2547bf">00072</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#ae9b9a4df36112dc45709a09cff2547bf">$reference</a>;
<a name="l00077"></a><a class="code" href="class_documentation.html#a6fc229de3044e834c68bfecaee7ed7cd">00077</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#a6fc229de3044e834c68bfecaee7ed7cd">$ref_biblio</a>;
<a name="l00082"></a><a class="code" href="class_documentation.html#affd12395186362049c31e11426b58fd8">00082</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#affd12395186362049c31e11426b58fd8">$tarif</a>;
<a name="l00088"></a><a class="code" href="class_documentation.html#a9929069ac3c003c7169b8edcf47a9e28">00088</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#a9929069ac3c003c7169b8edcf47a9e28">$pwd</a>; 
<a name="l00093"></a><a class="code" href="class_documentation.html#ac9732eada08987cf0a09ff49cbb574b5">00093</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#ac9732eada08987cf0a09ff49cbb574b5">$poids</a>;
<a name="l00098"></a><a class="code" href="class_documentation.html#a69b8b3a40924053f7c839c571ba80dfe">00098</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#a69b8b3a40924053f7c839c571ba80dfe">$acces_res</a>;
<a name="l00103"></a><a class="code" href="class_documentation.html#aad8e5a76c42482228423cfca61564970">00103</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#aad8e5a76c42482228423cfca61564970">$publiee</a>;
<a name="l00109"></a><a class="code" href="class_documentation.html#ac223802cfad77d30fe142b48889a41ee">00109</a>         <span class="keyword">public</span> <a class="code" href="class_documentation.html#ac223802cfad77d30fe142b48889a41ee" title="La documentation est &amp;agrave; la une ou pas.">$une</a>;
<a name="l00110"></a>00110         <span class="keyword">public</span> $listcateg = array();
<a name="l00111"></a>00111         <span class="keyword">public</span> $listsscateg = array(); 
<a name="l00112"></a>00112         
<a name="l00113"></a>00113         function creerDoc() {   
<a name="l00114"></a>00114                 <span class="keywordflow">if</span> ($this-&gt;date) <a class="code" href="class_documentation.html#a31a6d6b9409a2e11e93fe8211a84cba0">$date</a>=formaterDate($this-&gt;date); <span class="keywordflow">else</span> <a class="code" href="class_documentation.html#a31a6d6b9409a2e11e93fe8211a84cba0">$date</a>=0;  
<a name="l00115"></a>00115             mysql_query(<span class="stringliteral">&quot;INSERT INTO if_docs (numpara,type_doc,titre_en,contenu_en,auteur,ref_biblio,date,date_libre,reference,keyw,tarif,poids,pwd,acces_res,une,publiee) </span>
<a name="l00116"></a>00116 <span class="stringliteral">                VALUES (&#39;$this-&gt;numpara&#39;,&#39;$this-&gt;type_doc&#39;,&#39;$this-&gt;titre_en&#39;,&#39;$this-&gt;contenu_en&#39;,&#39;$this-&gt;auteur&#39;,&#39;$this-&gt;ref_biblio&#39;,&#39;$date&#39;,&#39;$this-&gt;date_libre&#39;,&#39;$this-&gt;reference&#39;,&#39;$this-&gt;keyw&#39;,&#39;$this-&gt;tarif&#39;,&#39;$this-&gt;poids&#39;,&#39;$this-&gt;pwd&#39;,&#39;$this-&gt;acces_res&#39;,&#39;$this-&gt;une&#39;,&#39;$this-&gt;publiee&#39;)&quot;</span>);
<a name="l00117"></a>00117                 
<a name="l00118"></a>00118         }
<a name="l00119"></a>00119         
<a name="l00120"></a>00120         
<a name="l00121"></a>00121         function modifierDoc() {
<a name="l00122"></a>00122                 <span class="keywordflow">if</span> ($this-&gt;date) <a class="code" href="class_documentation.html#a31a6d6b9409a2e11e93fe8211a84cba0">$date</a>=formaterDate($this-&gt;date); <span class="keywordflow">else</span> <a class="code" href="class_documentation.html#a31a6d6b9409a2e11e93fe8211a84cba0">$date</a>=0;            
<a name="l00123"></a>00123             mysql_query(<span class="stringliteral">&quot;UPDATE if_docs SET type_doc=&#39;$this-&gt;type_doc&#39;,titre_en=&#39;$this-&gt;titre_en&#39;,contenu_en=&#39;$this-&gt;contenu_en&#39;,auteur=&#39;$this-&gt;auteur&#39;, ref_biblio=&#39;$this-&gt;ref_biblio&#39;, date=&#39;$date&#39;, date_libre=&#39;$this-&gt;date_libre&#39;, reference=&#39;$this-&gt;reference&#39;, keyw=&#39;$this-&gt;keyw&#39;,tarif=&#39;$this-&gt;tarif&#39;, pwd=&#39;$this-&gt;pwd&#39;, poids=&#39;$this-&gt;poids&#39;, acces_res=&#39;$this-&gt;acces_res&#39;, une=&#39;$this-&gt;une&#39;, publiee=&#39;$this-&gt;publiee&#39; WHERE numpara=&#39;$this-&gt;numpara&#39;&quot;</span>);
<a name="l00124"></a>00124                 mysql_query(<span class="stringliteral">&quot;DELETE FROM if_para_categ WHERE numpara=&#39;$this-&gt;numpara&#39;&quot;</span>);
<a name="l00125"></a>00125             mysql_query(<span class="stringliteral">&quot;DELETE FROM if_para_sscateg WHERE numpara=&#39;$this-&gt;numpara&#39;&quot;</span>);
<a name="l00126"></a>00126         }
<a name="l00127"></a>00127         
<a name="l00128"></a>00128         function supprimerDoc() {       
<a name="l00129"></a>00129            mysql_query(<span class="stringliteral">&quot;DELETE FROM if_paragraphe WHERE numpara=&#39;$this-&gt;numpara&#39;&quot;</span>);
<a name="l00130"></a>00130            mysql_query(<span class="stringliteral">&quot;DELETE FROM if_docs WHERE numpara=&#39;$this-&gt;numpara&#39;&quot;</span>);
<a name="l00131"></a>00131            <span class="keywordflow">if</span> ($this-&gt;numparafichier) mysql_query(<span class="stringliteral">&quot;DELETE FROM if_para_fichier WHERE numparafichier=&#39;$this-&gt;numparafichier&#39;&quot;</span>);
<a name="l00132"></a>00132            
<a name="l00133"></a>00133         } 
<a name="l00134"></a>00134         
<a name="l00135"></a>00135         <span class="comment">// Fonction qui ajoute un nouveau type de documentation</span>
<a name="l00136"></a>00136         function ajouterTypeDoc() {
<a name="l00137"></a>00137                 $max_num=SelectMax(<span class="stringliteral">&quot;type_doc&quot;</span>,<span class="stringliteral">&quot;if_type_doc&quot;</span>); 
<a name="l00138"></a>00138                 $new_num_doc=$max_num+1;
<a name="l00139"></a>00139                 mysql_query(<span class="stringliteral">&quot;INSERT INTO if_type_doc (type_doc,nom) VALUES (&#39;$new_num_doc&#39;,&#39;$this-&gt;new_type_doc&#39;)&quot;</span>);
<a name="l00140"></a>00140                 <span class="keywordflow">return</span> $new_num_doc;
<a name="l00141"></a>00141         }
<a name="l00142"></a>00142         
<a name="l00143"></a>00143         function afficherCateg() {
<a name="l00144"></a>00144                 $result=mysql_query(<span class="stringliteral">&quot;SELECT numcateg FROM if_para_categ WHERE numpara=&#39;$this-&gt;numpara&#39;&quot;</span>);
<a name="l00145"></a>00145                 <span class="keywordflow">while</span> ($row=mysql_fetch_row($result)) {
<a name="l00146"></a>00146                           $laCateg=<span class="keyword">new</span> <a class="code" href="class_menu.html" title="création, modification, suppression d&amp;#39;un menu">Menu</a>();
<a name="l00147"></a>00147                           $laCateg-&gt;type=<span class="stringliteral">&quot;categorie&quot;</span>;
<a name="l00148"></a>00148                           $laCateg-&gt;nomkey=<span class="stringliteral">&quot;numcateg&quot;</span>;
<a name="l00149"></a>00149                           $laCateg-&gt;nummenu=$row[0];  
<a name="l00150"></a>00150                           $laCateg-&gt;infosMenu();
<a name="l00151"></a>00151                           $this-&gt;listcateg[]=$laCateg;
<a name="l00152"></a>00152                 } 
<a name="l00153"></a>00153                 <span class="keywordflow">if</span> (count($this-&gt;listcateg)&gt;=1) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00154"></a>00154         }
<a name="l00155"></a>00155         
<a name="l00156"></a>00156         function afficherSscateg() {
<a name="l00157"></a>00157                 $result=mysql_query(<span class="stringliteral">&quot;SELECT numsscateg FROM if_para_sscateg WHERE numpara=&#39;$this-&gt;numpara&#39;&quot;</span>);
<a name="l00158"></a>00158                 <span class="keywordflow">while</span> ($row=mysql_fetch_row($result)) {
<a name="l00159"></a>00159                           $laSscateg=<span class="keyword">new</span> <a class="code" href="class_menu.html" title="création, modification, suppression d&amp;#39;un menu">Menu</a>();
<a name="l00160"></a>00160                           $laSscateg-&gt;type=<span class="stringliteral">&quot;sscateg&quot;</span>;
<a name="l00161"></a>00161                           $laSscateg-&gt;nomkey=<span class="stringliteral">&quot;numsscateg&quot;</span>;
<a name="l00162"></a>00162                           $laSscateg-&gt;nummenu=$row[0];  
<a name="l00163"></a>00163                           $laSscateg-&gt;infosMenu();
<a name="l00164"></a>00164                           $this-&gt;listsscateg[]=$laSscateg;
<a name="l00165"></a>00165                 } 
<a name="l00166"></a>00166                 <span class="keywordflow">if</span> (count($this-&gt;listsscateg)&gt;=1) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00167"></a>00167         }
<a name="l00168"></a>00168         
<a name="l00169"></a>00169         function associerFormaCateg() {
<a name="l00170"></a>00170                 <span class="keywordflow">if</span> (is_array($this-&gt;listcateg)) {
<a name="l00171"></a>00171                    <span class="keywordflow">for</span> ($i=0;$i&lt;count($this-&gt;listcateg);$i++) {  
<a name="l00172"></a>00172                                 $categ=$this-&gt;listcateg[$i];
<a name="l00173"></a>00173                                 mysql_query(<span class="stringliteral">&quot;INSERT INTO if_para_categ (numpara,numcateg) VALUES (&#39;$this-&gt;numpara&#39;,&#39;$categ&#39;)&quot;</span>);
<a name="l00174"></a>00174                    }
<a name="l00175"></a>00175                 }
<a name="l00176"></a>00176         }
<a name="l00177"></a>00177         
<a name="l00178"></a>00178         function associerFormaSscateg() {
<a name="l00179"></a>00179                  <span class="keywordflow">if</span> (is_array($this-&gt;listsscateg)) {
<a name="l00180"></a>00180                    <span class="keywordflow">for</span> ($i=0;$i&lt;count($this-&gt;listsscateg);$i++) {
<a name="l00181"></a>00181                                 $sscateg=$this-&gt;listsscateg[$i];
<a name="l00182"></a>00182                                 mysql_query(<span class="stringliteral">&quot;INSERT INTO if_para_sscateg (numpara,numsscateg) VALUES (&#39;$this-&gt;numpara&#39;,&#39;$sscateg&#39;)&quot;</span>);
<a name="l00183"></a>00183                    }
<a name="l00184"></a>00184                 }
<a name="l00185"></a>00185         }
<a name="l00186"></a>00186          
<a name="l00187"></a>00187         function infosDoc(){
<a name="l00188"></a>00188                 $row=SelectMultiple(<span class="stringliteral">&quot;if_v_doc&quot;</span>,<span class="stringliteral">&quot;numpara&quot;</span>,$this-&gt;numpara);
<a name="l00189"></a>00189                 $this-&gt;titrePara=miseEnForme($row[<span class="stringliteral">&quot;titre&quot;</span>]);    
<a name="l00190"></a>00190                 $this-&gt;contenuPara=miseEnForme($row[<span class="stringliteral">&quot;contenu&quot;</span>]);
<a name="l00191"></a>00191                 $this-&gt;type_doc=$row[<span class="stringliteral">&quot;type_doc&quot;</span>];
<a name="l00192"></a>00192                 $this-&gt;nom_type_doc=SelectSimple(<span class="stringliteral">&quot;nom&quot;</span>,<span class="stringliteral">&quot;if_type_doc&quot;</span>,<span class="stringliteral">&quot;type_doc&quot;</span>,$row[<span class="stringliteral">&quot;type_doc&quot;</span>]);
<a name="l00193"></a>00193                 $this-&gt;titre_en=miseEnForme($row[<span class="stringliteral">&quot;titre_en&quot;</span>]);
<a name="l00194"></a>00194                 $this-&gt;contenu_en=miseEnForme($row[<span class="stringliteral">&quot;contenu_en&quot;</span>]);
<a name="l00195"></a>00195                 $this-&gt;auteur=$row[<span class="stringliteral">&quot;auteur&quot;</span>];
<a name="l00196"></a>00196                 $this-&gt;ref_biblio=$row[<span class="stringliteral">&quot;ref_biblio&quot;</span>];
<a name="l00197"></a>00197                 <span class="keywordflow">if</span> ($row[<span class="stringliteral">&quot;date&quot;</span>]) {
<a name="l00198"></a>00198                         $this-&gt;date=date(<span class="stringliteral">&quot;d/m/Y&quot;</span>,$row[<span class="stringliteral">&quot;date&quot;</span>]);
<a name="l00199"></a>00199                         $this-&gt;date_brute=$row[<span class="stringliteral">&quot;date&quot;</span>];
<a name="l00200"></a>00200                 }
<a name="l00201"></a>00201                 $this-&gt;date_libre=$row[<span class="stringliteral">&quot;date_libre&quot;</span>];
<a name="l00202"></a>00202                 <span class="comment">//annee fabriquee a la volee</span>
<a name="l00203"></a>00203                 <span class="keywordflow">if</span> ($row[<span class="stringliteral">&quot;date_libre&quot;</span>]) $this-&gt;anneeDoc=substr($row[<span class="stringliteral">&quot;date_libre&quot;</span>],0,4);
<a name="l00204"></a>00204                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($row[<span class="stringliteral">&quot;date&quot;</span>]) $this-&gt;anneeDoc=date(<span class="stringliteral">&quot;Y&quot;</span>,$row[<span class="stringliteral">&quot;date&quot;</span>]);
<a name="l00205"></a>00205                 $this-&gt;reference=$row[<span class="stringliteral">&quot;reference&quot;</span>];
<a name="l00206"></a>00206                 $this-&gt;keyw=$row[<span class="stringliteral">&quot;keyw&quot;</span>];
<a name="l00207"></a>00207                 $this-&gt;tarif=$row[<span class="stringliteral">&quot;tarif&quot;</span>];
<a name="l00208"></a>00208                 $this-&gt;poids=$row[<span class="stringliteral">&quot;poids&quot;</span>];
<a name="l00209"></a>00209                 $this-&gt;pwd=$row[<span class="stringliteral">&quot;pwd&quot;</span>];
<a name="l00210"></a>00210                 $this-&gt;acces_res=$row[<span class="stringliteral">&quot;acces_res&quot;</span>];
<a name="l00211"></a>00211                 $this-&gt;une=$row[<span class="stringliteral">&quot;une&quot;</span>];
<a name="l00212"></a>00212                 $this-&gt;publiee=$row[<span class="stringliteral">&quot;publiee&quot;</span>];
<a name="l00213"></a>00213         }
<a name="l00214"></a>00214         
<a name="l00215"></a>00215         function infosDocVersionCourte(){
<a name="l00216"></a>00216                 $result=mysql_query(<span class="stringliteral">&quot;SELECT date_libre,date FROM if_v_doc WHERE numpara=&#39;&quot;</span>.$this-&gt;numpara.<span class="stringliteral">&quot;&#39;&quot;</span>);
<a name="l00217"></a>00217                 $row=mysql_fetch_array($result);
<a name="l00218"></a>00218                 <span class="comment">//$row=SelectMultiple(&quot;if_v_doc&quot;,&quot;numpara&quot;,$this-&gt;numpara);</span>
<a name="l00219"></a>00219                 <span class="keywordflow">if</span> ($row[<span class="stringliteral">&quot;date_libre&quot;</span>]) $this-&gt;anneeDoc=substr($row[<span class="stringliteral">&quot;date_libre&quot;</span>],0,4);
<a name="l00220"></a>00220                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($row[<span class="stringliteral">&quot;date&quot;</span>]) $this-&gt;anneeDoc=date(<span class="stringliteral">&quot;Y&quot;</span>,$row[<span class="stringliteral">&quot;date&quot;</span>]);
<a name="l00221"></a>00221                 <span class="keywordflow">if</span> ($row[<span class="stringliteral">&quot;date&quot;</span>]) $this-&gt;date_brute=$row[<span class="stringliteral">&quot;date&quot;</span>];
<a name="l00222"></a>00222         }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224         
<a name="l00225"></a>00225 }<span class="comment">//fin de la classe documentation</span>
<a name="l00226"></a>00226 ?&gt;
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Généré par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
